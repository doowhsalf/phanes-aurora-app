{"version":3,"sources":["meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/_init.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/group.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/route.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/router.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/plugins/fast-render.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/lib/_helpers.js"],"names":["module","export","FlowRouter","Router","Route","Group","Triggers","BlazeRenderer","Meteor","link","v","default","Package","_debug","_helpers","makeTrigger","trigger","isFunction","isArray","makeTriggers","_base","_triggers","concat","constructor","router","options","arguments","length","undefined","parent","prefix","test","Error","_router","name","_triggersEnter","triggersEnter","_triggersExit","triggersExit","_subscriptions","subscriptions","Function","prototype","route","_pathDef","_group","group","pathDef","extend","omit","exportDefault","path","action","_subsMap","register","sub","subscription","middleware","page","qs","require","pathRegExp","_routes","_routesMap","_current","_specialChars","_encodeParam","param","paramArr","split","_param","i","includes","encodeURIComponent","e","_onRouteCallbacks","triggers","enter","exit","matchPath","params","find","r","pageRoute","match","clone","setCurrent","current","push","_triggerRouteRegister","fields","queryParams","replace","_key","firstRegexpChar","indexOf","key","substring","strQueryParams","stringify","onRouteRegister","cb","currentRoute","routePublicApi","pick","forEach","go","getState","getAllStates","getRouteName","getQueryParam","query","setState","setParams","removeState","clearStates","ready","initialize","wait","url","absoluteUrl","apply","RegExp","_basePath","FastRender","setupFastRender","routeParams","meteorSubscribe","subscribe","Array","from","call","Object","keys","startup","isEmpty","obj","isString","isArguments","isObject","type","copy","picked","_len","objs","assign","slice","toString"],"mappings":"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","file":"/packages/ostrio_flow-router-extra.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport Router from './router.js';\nimport Route from './route.js';\nimport Group from './group.js';\n\nimport './plugins/fast-render.js';\n\nif (Package['meteorhacks:inject-data']) {\n  Meteor._debug('`meteorhacks:inject-data` is deprecated, please remove it and install its successor - `communitypackages:inject-data`');\n  Meteor._debug('meteor remove meteorhacks:inject-data');\n  Meteor._debug('meteor add communitypackages:inject-data');\n}\n\nif (Package['meteorhacks:fast-render']) {\n  Meteor._debug('`meteorhacks:fast-render` is deprecated, please remove it and install its successor - `communitypackages:fast-render`');\n  Meteor._debug('meteor remove meteorhacks:fast-render');\n  Meteor._debug('meteor add communitypackages:fast-render');\n}\n\nif (Package['staringatlights:inject-data']) {\n  Meteor._debug('`staringatlights:inject-data` is deprecated, please remove it and install its successor - `communitypackages:inject-data`');\n  Meteor._debug('meteor remove staringatlights:inject-data');\n  Meteor._debug('meteor add communitypackages:inject-data');\n}\n\nif (Package['staringatlights:fast-render']) {\n  Meteor._debug('`staringatlights:fast-render` is deprecated, please remove it and install its successor - `communitypackages:fast-render`');\n  Meteor._debug('meteor remove staringatlights:fast-render');\n  Meteor._debug('meteor add communitypackages:fast-render');\n}\n\nconst Triggers = {};\nconst BlazeRenderer = {};\n\nconst FlowRouter = new Router();\nFlowRouter.Router = Router;\nFlowRouter.Route = Route;\n\nexport { FlowRouter, Router, Route, Group, Triggers, BlazeRenderer };\n","import { _helpers } from './../lib/_helpers.js';\n\nconst makeTrigger = (trigger) => {\n  if (_helpers.isFunction(trigger)) {\n    return [trigger];\n  } else if (!_helpers.isArray(trigger)) {\n    return [];\n  }\n\n  return trigger;\n};\n\nconst makeTriggers = (_base, _triggers) => {\n  if ((!_base && !_triggers)) {\n    return [];\n  }\n  return makeTrigger(_base).concat(makeTrigger(_triggers));\n};\n\nclass Group {\n  constructor(router, options = {}, parent) {\n    if (options.prefix && !/^\\//.test(options.prefix)) {\n      throw new Error('group\\'s prefix must start with \"/\"');\n    }\n\n    this._router = router;\n    this.prefix = options.prefix || '';\n    this.name = options.name;\n    this.options = options;\n\n    this._triggersEnter = makeTriggers(options.triggersEnter, this._triggersEnter);\n    this._triggersExit  = makeTriggers(this._triggersExit, options.triggersExit);\n\n    this._subscriptions = options.subscriptions || Function.prototype;\n\n    this.parent = parent;\n    if (this.parent) {\n      this.prefix = parent.prefix + this.prefix;\n      this._triggersEnter = makeTriggers(parent._triggersEnter, this._triggersEnter);\n      this._triggersExit  = makeTriggers(this._triggersExit, parent._triggersExit);\n    }\n  }\n\n  route(_pathDef, options = {}, _group) {\n    if (!/^\\//.test(_pathDef)) {\n      throw new Error('route\\'s path must start with \"/\"');\n    }\n\n    const group   = _group || this;\n    const pathDef = this.prefix + _pathDef;\n\n    options.triggersEnter = makeTriggers(this._triggersEnter, options.triggersEnter);\n    options.triggersExit  = makeTriggers(options.triggersExit, this._triggersExit);\n\n    return this._router.route(pathDef, _helpers.extend(_helpers.omit(this.options, ['triggersEnter', 'triggersExit', 'subscriptions', 'prefix', 'waitOn', 'name', 'title', 'titlePrefix', 'link', 'script', 'meta']), options), group);\n  }\n\n  group(options) {\n    return new Group(this._router, options, this);\n  }\n}\n\nexport default Group;\n","class Route {\n  constructor(router, pathDef, options = {}) {\n    this.options = options;\n    this.name = options.name;\n    this.pathDef = pathDef;\n\n    // Route.path is deprecated and will be removed in 3.0\n    this.path = pathDef;\n\n    this.action = options.action || Function.prototype;\n    this.subscriptions = options.subscriptions || Function.prototype;\n    this._subsMap = {};\n  }\n\n\n  register(name, sub) {\n    this._subsMap[name] = sub;\n  }\n\n\n  subscription(name) {\n    return this._subsMap[name];\n  }\n\n\n  middleware() {\n    // ?\n  }\n}\n\nexport default Route;\n","import page         from 'page';\nimport Route        from './route.js';\nimport Group        from './group.js';\nimport { Meteor }   from 'meteor/meteor';\nimport { _helpers } from '../lib/_helpers.js';\n\nconst qs = require('qs');\n\nclass Router {\n  constructor() {\n    this.pathRegExp = /(:[\\w\\(\\)\\\\\\+\\*\\.\\?\\[\\]\\-]+)+/g;\n    this._routes = [];\n    this._routesMap = {};\n    this._current = {};\n    this._specialChars = ['/', '%', '+'];\n    this._encodeParam = param => {\n      const paramArr = param.split('');\n      let _param = '';\n      for (let i = 0; i < paramArr.length; i++) {\n        if (this._specialChars.includes(paramArr[i])) {\n          _param += encodeURIComponent(encodeURIComponent(paramArr[i]));\n        } else {\n          try {\n            _param += encodeURIComponent(paramArr[i]);\n          } catch (e) {\n            _param += paramArr[i];\n          }\n        }\n      }\n      return _param;\n    };\n    this.subscriptions = Function.prototype;\n\n    // holds onRoute callbacks\n    this._onRouteCallbacks = [];\n\n    this.triggers = {\n      enter() {\n        // client only\n      },\n      exit() {\n        // client only\n      }\n    };\n  }\n\n  matchPath(path) {\n    const params = {};\n    const route = this._routes.find(r => {\n      const pageRoute = new page.Route(r.pathDef);\n      return pageRoute.match(path, params);\n    });\n    if (!route) {\n      return null;\n    }\n\n    return {\n      params: _helpers.clone(params),\n      route: _helpers.clone(route),\n    };\n  }\n\n  setCurrent(current) {\n    this._current = current;\n  }\n\n  route(pathDef, options = {}) {\n    if (!/^\\/.*/.test(pathDef) && pathDef !== '*') {\n      throw new Error('route\\'s path must start with \"/\"');\n    }\n\n    const route = new Route(this, pathDef, options);\n    this._routes.push(route);\n\n    if (options.name) {\n      this._routesMap[options.name] = route;\n    }\n\n    this._triggerRouteRegister(route);\n    return route;\n  }\n\n  group(options) {\n    return new Group(this, options);\n  }\n\n  path(_pathDef, fields = {}, queryParams) {\n    let pathDef = _pathDef;\n    if (this._routesMap[pathDef]) {\n      pathDef = this._routesMap[pathDef].path;\n    }\n\n    let path = pathDef.replace(this.pathRegExp, (_key) => {\n      const firstRegexpChar = _key.indexOf('(');\n      // get the content behind : and (\\\\d+/)\n      let key = _key.substring(1, firstRegexpChar > 0 ? firstRegexpChar : undefined);\n      // remove +?*\n      key = key.replace(/[\\+\\*\\?]+/g, '');\n\n      if (fields[key]) {\n        return this._encodeParam(`${fields[key]}`);\n      }\n\n      return '';\n    });\n\n    path = path.replace(/\\/\\/+/g, '/'); // Replace multiple slashes with single slash\n\n    // remove trailing slash\n    // but keep the root slash if it's the only one\n    path = path.match(/^\\/{1}$/) ? path : path.replace(/\\/$/, '');\n\n    const strQueryParams = qs.stringify(queryParams || {});\n    if (strQueryParams) {\n      path += `?${strQueryParams}`;\n    }\n\n    return path;\n  }\n\n  onRouteRegister(cb) {\n    this._onRouteCallbacks.push(cb);\n  }\n\n  _triggerRouteRegister(currentRoute) {\n    // We should only need to send a safe set of fields on the route\n    // object.\n    // This is not to hide what's inside the route object, but to show\n    // these are the public APIs\n    const routePublicApi = _helpers.pick(currentRoute, [\n      'name',\n      'pathDef',\n      'path',\n    ]);\n    routePublicApi.options = _helpers.omit(currentRoute.options, [\n      'triggersEnter',\n      'triggersExit',\n      'action',\n      'subscriptions',\n      'name',\n    ]);\n\n    this._onRouteCallbacks.forEach(cb => {\n      cb(routePublicApi);\n    });\n  }\n\n  go() {\n    // client only\n  }\n\n  current() {\n    // client only\n    return this._current;\n  }\n\n  middleware() {\n    // client only\n  }\n\n  getState() {\n    // client only\n  }\n\n  getAllStates() {\n    // client only\n  }\n\n  getRouteName() {\n    return this._current.route ? this._current.route.name : undefined;\n  }\n\n  getQueryParam(key) {\n    return this._current.query ? this._current.queryParams[key] : undefined;\n  }\n\n  setState() {\n    // client only\n  }\n\n  setParams() {}\n\n  removeState() {\n    // client only\n  }\n\n  clearStates() {\n    // client only\n  }\n\n  ready() {\n    // client only\n  }\n\n  initialize() {\n    // client only\n  }\n\n  wait() {\n    // client only\n  }\n\n  url() {\n    // We need to remove the leading base path, or \"/\", as it will be inserted\n    // automatically by `Meteor.absoluteUrl` as documented in:\n    // http://docs.meteor.com/#/full/meteor_absoluteurl\n    return Meteor.absoluteUrl(this.path.apply(this, arguments).replace(new RegExp('^' + ('/' + (this._basePath || '') + '/').replace(/\\/\\/+/g, '/')), ''));\n  }\n}\n\nexport default Router;\n","import { Meteor }     from 'meteor/meteor';\nimport { _helpers }   from './../../lib/_helpers.js';\nimport { FlowRouter } from '../_init.js';\n\nif(!Package['communitypackages:fast-render']) {\n  return;\n}\n\nconst FastRender = Package['communitypackages:fast-render'].FastRender;\n\nconst setupFastRender = () => {\n  FlowRouter._routes.forEach((route) => {\n    if (route.pathDef === '*') {\n      return;\n    }\n\n    FastRender.route(route.pathDef, function (routeParams, path) {\n      // anyone using Meteor.subscribe for something else?\n      const meteorSubscribe = Meteor.subscribe;\n      Meteor.subscribe = function () {\n        return Array.from(arguments);\n      };\n\n      route._subsMap = {};\n      FlowRouter.subscriptions.call(route, path);\n      if (route.subscriptions) {\n        route.subscriptions(_helpers.omit(routeParams, ['query']), routeParams.query);\n      }\n\n      Object.keys(route._subsMap).forEach((key) => {\n        this.subscribe.apply(this, route._subsMap[key]);\n      });\n\n      // restore Meteor.subscribe, ... on server side\n      Meteor.subscribe = meteorSubscribe;\n    });\n  });\n};\n\n// hack to run after everything else on startup\nMeteor.startup(() => {\n  Meteor.startup(() => {\n    setupFastRender();\n  });\n});\n","import { Meteor } from 'meteor/meteor';\n\nconst _helpers = {\n  isEmpty(obj) { // 1\n    if (obj == null) {\n      return true;\n    }\n\n    if (this.isArray(obj) || this.isString(obj) || this.isArguments(obj)) {\n      return obj.length === 0;\n    }\n\n    return Object.keys(obj).length === 0;\n  },\n  isObject(obj) {\n    const type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  },\n  omit(obj, keys) { // 10\n    if (!this.isObject(obj)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] First argument must be an Object');\n      return obj;\n    }\n\n    if (!this.isArray(keys)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] Second argument must be an Array');\n      return obj;\n    }\n\n    const copy = this.clone(obj);\n    keys.forEach((key) => {\n      delete copy[key];\n    });\n\n    return copy;\n  },\n  pick(obj, keys) { // 2\n    if (!this.isObject(obj)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] First argument must be an Object');\n      return obj;\n    }\n\n    if (!this.isArray(keys)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] Second argument must be an Array');\n      return obj;\n    }\n\n    const picked = {};\n    keys.forEach((key) => {\n      picked[key] = obj[key];\n    });\n\n    return picked;\n  },\n  isArray(obj) {\n    return Array.isArray(obj);\n  },\n  extend(...objs) { // 4\n    return Object.assign({}, ...objs);\n  },\n  clone(obj) {\n    if (!this.isObject(obj)) return obj;\n    return this.isArray(obj) ? obj.slice() : this.extend(obj);\n  }\n};\n\n['Arguments', 'Function', 'String', 'RegExp'].forEach((name) => {\n  _helpers['is' + name] = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object ' + name + ']';\n  };\n});\n\nexport { _helpers };\n"]}